<Ui xmlns="http://www.blizzard.com/wow/ui" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Include file="WoWInit.lua" />
    <Frame name="WI_Listener" hidden="true">
        <Scripts>
            <OnLoad>
                this:RegisterEvent("SKILL_LINES_CHANGED");
            </OnLoad>
            <OnEvent>
                WI_Run()
            </OnEvent>
        </Scripts>
    </Frame>
    <Frame name="WI_CMDFrame" frameStrata="DIALOG" toplevel="true" hidden="true">
        <Anchors>
            <Anchor point="CENTER" relativeTo="UIParent">
                <Offset>
                    <AbsDimension x="0" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
        <Size>
            <AbsDimension x="400" y="400" />
        </Size>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11" />
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32" />
            </TileSize>
            <EdgeSize>
                <AbsValue val="32" />
            </EdgeSize>
        </Backdrop>
        <Layers>
            <Layer>
                <Texture name="$parentTitleBorder" file="Interface\DialogFrame\UI-DialogBox-Header">
                    <Size>
                        <AbsDimension x="160" y="32" />
                    </Size>
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                                <AbsDimension x="0" y="5" />
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <TexCoords left="0.2" right="0.8" top="0" bottom="0.6" />
                </Texture>
                <FontString name="$parentTitleString" font="GameFontNormal" text="WI_CMDFrameTitle">
                    <!--Window Title -->
                    <Size>
                        <AbsDimension x="140" y="0" />
                    </Size>
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                                <AbsDimension x="0" y="-5" />
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <FontHeight>
                        <AbsValue val="12" />
                    </FontHeight>
                    <Color r="1" g="0.8196079" b="0" />
                    <Shadow>
                        <Color r="0" g="0" b="0" />
                        <Offset>
                            <AbsDimension x="1" y="-1" />
                        </Offset>
                    </Shadow>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
            <Frame name="$parentLayer2" enableMouse="true">
                <Anchors>
                    <Anchor point="LEFT">
                        <Offset x="40" y="-50" />
                    </Anchor>
                    <Anchor point="TOP">
                        <Offset x="50" y="-50" />
                    </Anchor>
                    <Anchor point="BOTTOM">
                        <Offset x="50" y="50" />
                    </Anchor>
                </Anchors>
                <Size>
                    <AbsDimension x="320" y="180" />
                </Size>
                <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\GLUES\COMMON\TextPanel-Border" tile="true">
                    <BackgroundInsets>
                        <AbsInset left="8" right="9" top="6" bottom="8" />
                    </BackgroundInsets>
                    <TileSize>
                        <AbsValue val="32" />
                    </TileSize>
                    <EdgeSize>
                        <AbsValue val="32" />
                    </EdgeSize>
                </Backdrop>
                <Scripts>
                    <OnMouseDown>
                        WI_CMDFrame_ScrollFrame_EditBox:SetFocus();
                    </OnMouseDown>
                </Scripts>
            </Frame>
            <ScrollFrame name="$parent_ScrollFrame" inherits="UIPanelScrollFrameTemplate">
                <Size>
                    <AbsDimension x="300" y="480"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT">
                        <Offset x="50" y="-60" />
                    </Anchor>
                    <Anchor point="TOP">
                        <Offset x="50" y="-60" />
                    </Anchor>
                    <Anchor point="BOTTOM">
                        <Offset x="50" y="60" />
                    </Anchor>
                </Anchors>
                <ScrollChild>
                    <EditBox name="$parent_EditBox" multiLine="1" font="GameFontNormal" autoFocus="false">
                        <Size>
                            <AbsDimension x="300" y="480" />
                        </Size>
                        <Anchors>
                            <Anchor point="TOPLEFT" relativeTo="$parent_ScrollFrame">
                                <Offset x="-80" y="80" />
                            </Anchor>
                            <Anchor point="BOTTOMRIGHT"  relativeTo="$parent_ScrollFrame">
                                <Offset x="20" y="20" />
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnShow>
								WI_CMDFrame_OnShow()
                                WI_CMDFrame_ScrollFrame_EditBox:SetFocus();
							</OnShow>
                            <OnTextChanged>
								local scrollBar = getglobal(this:GetParent():GetName().."ScrollBar")
								this:GetParent():UpdateScrollChildRect();
								local min;
								local max;
								min, max = scrollBar:GetMinMaxValues();
								if ( max > 0 and (this.max ~= max) ) then
									this.max = max;
									scrollBar:SetValue(max);
								end
							</OnTextChanged>
                            <OnEscapePressed>
							    WI_CMDFrame_ScrollFrame_EditBox:ClearFocus();
							</OnEscapePressed>
                        </Scripts>
                    </EditBox>
                </ScrollChild>
            </ScrollFrame>
            <Button name="$parent_SubmitButton" text="WI_SUBMITBUTTON" inherits="UIPanelButtonTemplate">
                <Size>
                    <AbsDimension x="155" y="20" />
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM" relativeTo="$parent_ScrollFrame">
                        <Offset>
                            <AbsDimension x="0" y="-35"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
					    WI_CMDFrame_SubmitButton_OnClick();
                   </OnClick>
                </Scripts>
            </Button>
            <Button name="$parent_Close" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT">
                        <Offset>
                            <AbsDimension x="-2" y="-4"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
					    WI_CMDFrame:Hide();
					</OnClick>
                </Scripts>
            </Button>
        </Frames>
        <Scripts>
            <OnLoad>             
			    tinsert(UISpecialFrames, "WI_CMDFrame");
			</OnLoad>
            <OnShow>
			    PlaySound("igCharacterInfoOpen");
			</OnShow>
            <OnHide>
			    PlaySound("igCharacterInfoClose");
			</OnHide>
        </Scripts>
    </Frame>
    <Frame name="WI_MinimapButtonFrame" parent="Minimap" enableMouse="true" hidden="false" frameStrata="LOW">
        <Size>
            <AbsDimension x="32" y="32"/>
        </Size>
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="Minimap" relativePoint="RIGHT">
                <Offset>
                    <AbsDimension x="2" y="0"/>
                </Offset>
            </Anchor>
        </Anchors>
        <Layers>
            <Layer level="OVERLAY">
                <Texture name="$parent_Overlay" file="Interface\Minimap\MiniMap-TrackingBorder">
                    <Size>
                        <AbsDimension x="53" y="53"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
            </Layer>
            <Layer level="BACKGROUND">
                <Texture name="$parent_Background" file="Interface\Minimap\UI-Minimap-Background">
                    <Size>
                        <AbsDimension x="20" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="7" y="-5"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
            </Layer>
            <Layer level="ARTWORK">
                <Texture name="$parent_Artwork" file="Interface\Icons\INV_Misc_PunchCards_Blue">
                    <Size>
                        <AbsDimension x="17" y="17"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="7" y="-6"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
            </Layer>
        </Layers>
        <Frames>
            <Button name="WI_MinimapButton" enableMouse="true">
                <Size>
                    <AbsDimension x="31" y="31"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="0" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>

                <HighlightTexture alphaMode="ADD" file="Interface\Minimap\UI-Minimap-ZoomButton-Highlight"/>
                <Scripts>
                    <OnMouseDown>
						WI_MinimapButton_OnClick();
                        GameTooltip:Hide();
					</OnMouseDown>
                    <OnMouseUp>
                        WI_MinimapButton_OnClickUp();
                    </OnMouseUp>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_BOTTOMRIGHT");
                        GameTooltip:SetText(WI_ADDONNAME);
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>
                        GameTooltip:Hide();
                    </OnLeave>
                </Scripts>
            </Button>
        </Frames>
        <Scripts>
            <OnLoad>
                <!--ParchmentButton_Init();-->
                <!-- UIDropDownMenu_Initialize(self, MH_MinimapDrop_OnLoad); -->
            </OnLoad>
        </Scripts>
    </Frame>
</Ui>